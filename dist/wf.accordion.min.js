!function(){"use strict";const t={accordionGroup:".js-accordion-group",accordionRoot:".js-accordion",accordionHeader:".js-accordion__header",accordionTrigger:".js-accordion__trigger",accordionPanel:".js-accordion__panel",disableHashUpdate:!1};function e(){return window.location.hash.replace("#","")}function i(t,e,i){return i=i||{removeHeadingAttributes:!1},e.innerHTML=t.innerHTML,i.removeHeadingAttributes&&function(t){for(;t.attributes.length>0;)t.removeAttribute(t.attributes[0].name)}(t),t.replaceChildren(),t.append(e),t}function r(t){const e=(i=t).getAttributeNames().reduce(((t,e)=>({...t,[e]:i.getAttribute(e)})),{});var i;let r=document.createElement("button");for(const t in e)r.setAttribute(t,e[t]);return r.setAttribute("type","button"),r}window.wfaccordion=window.wfaccordion||{},window.wfaccordion.groups=window.wfaccordion.groups||[],window.wfaccordion.slugs=window.wfaccordion.slugs||[];class s{constructor(s,o){var n,a,c;this.settings={...t,...o},this.root=s,this.panel=this.root.querySelector(this.settings.accordionPanel),this.placeholder=this.root.querySelector(this.settings.accordionTrigger),this.slug=this.root.getAttribute("id")||(n=this.placeholder.textContent,a="àáäâãåăæąçćčđďèéěėëêęğǵḧìíïîįłḿǹńňñòóöôœøṕŕřßşśšșťțùúüûǘůűūųẃẍÿýźžż·/_,:;",c=new RegExp(a.split("").join("|"),"g"),n.toString().toLowerCase().replace(/\s+/g,"-").replace(c,(function(t){return"aaaaaaaaacccddeeeeeeegghiiiiilmnnnnooooooprrsssssttuuuuuuuuuwxyyzzz------".charAt(a.indexOf(t))})).replace(/&/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"").replace(/^[0-9]/,"a$&")),this.slugOccurence=window.wfaccordion.slugs.filter(((t,e)=>t.indexOf(this.slug)>=0)).length,window.wfaccordion.slugs.includes(this.slug)?(window.wfaccordion.slugs.push(this.slug+"-"+this.slugOccurence),this.triggerId=this.slug+"-"+this.slugOccurence,this.panelId=this.slug+"-panel-"+this.slugOccurence):(window.wfaccordion.slugs.push(this.slug),this.triggerId=this.slug,this.panelId=this.slug+"-panel"),function(e,s){const o={...t,...s},n=e.querySelector(o.accordionHeader),a=e.querySelector(o.accordionTrigger),c=a.nodeName.toLowerCase().match(/h[2-6]/),d=function(t){let e=t.cloneNode(!0);e.innerHTML=e.innerHTML.replace(/\s+/g,"");const i=1===e.childNodes.length,r=Array.from(e.children).filter((t=>t.nodeName.toLowerCase().match(/h[2-6]/))).length>0;return e.remove(),i&&r}(a);let h;h=c?i(a,r(a),{removeHeadingAttributes:!0}):d?function(t){const e=t.querySelector(":scope > h2, :scope > h3, :scope > h4, :scope > h5, :scope > h6");return i(e,r(t)),t.remove(),e}(a):function(t){let e=r(t);return e.innerHTML=t.innerHTML,t.remove(),e}(a),n.prepend(h)}(this.root,this.settings),this.trigger=this.root.querySelector(this.settings.accordionTrigger),this.events(),this.root.removeAttribute("id"),this.isDisabled=this.root.hasAttribute("data-wf-accordion-disabled"),this.isTargetOfUrlHash=this.triggerId===e(),this.isExpandedOnStartup=this.root.hasAttribute("data-wf-accordion-expanded"),this.trigger.setAttribute("id",this.triggerId),this.trigger.setAttribute("aria-controls",this.panelId),this.trigger.setAttribute("aria-disabled",this.isDisabled),this.trigger.setAttribute("aria-expanded",this.isExpandedOnStartup),this.panel&&(this.panel.setAttribute("id",this.panelId),this.panel.setAttribute("aria-labelledby",this.triggerId),this.panel.setAttribute("aria-hidden",!this.isExpandedOnStartup)),this.isTargetOfUrlHash&&(this.trigger.focus(),console.log("test"),this.root.dispatchEvent(new CustomEvent("wf.accordion.expandedByHash",{bubbles:!0,cancelable:!0})))}toggle(){const t="false"===this.trigger.getAttribute("aria-expanded");this.isDisabled||(this.trigger.setAttribute("aria-expanded",t),this.root.querySelector("#"+this.trigger.getAttribute("aria-controls")).setAttribute("aria-hidden",!t))}updateHash(){var t;"true"===this.trigger.getAttribute("aria-expanded")&&this.triggerId!==e()?(t=this.triggerId,history.replaceState?history.replaceState(null,"","#"+t):location.hash=t):"false"===this.trigger.getAttribute("aria-expanded")&&this.triggerId===e()&&history.replaceState&&history.replaceState(null,""," ")}events(){this.root.addEventListener("wf.accordion.expandedByHash",(t=>{this.toggle()})),this.trigger.addEventListener("click",(t=>{this.toggle(),this.settings.disableHashUpdate||this.updateHash()}))}}class o{constructor(e,i){this.group=e,this.settings={...t,...i},this.accordions=Array.from(this.group.querySelectorAll(this.settings.accordionRoot)).filter((t=>this.group===t.parentElement)).map((t=>new s(t,i))),this.accordionTrigger=this.accordions.map((t=>t.trigger)),this.events()}events(){this.group.addEventListener("keydown",(t=>{const e=t.target,i=t.which.toString(),r=t.ctrlKey&&i.match(/33|34/);if(i.match(/38|40/)||r){const r=this.accordionTrigger.indexOf(e),s=i.match(/34|40/)?1:-1,o=this.accordionTrigger.length,n=(r+o+s)%o;this.accordionTrigger[n].focus(),t.preventDefault()}else if(i.match(/35|36/)){switch(i){case"36":this.accordionTrigger[0].focus();break;case"35":this.accordionTrigger[this.accordionTrigger.length-1].focus()}t.preventDefault()}}))}}((e,i)=>{const r={...t},s=Array.from(document.querySelectorAll(r.accordionGroup));window.addEventListener("wf.accordions.mounted",(t=>{})),s.forEach(((t,e)=>{window.wfaccordion.groups.push(new o(t,r)),e===s.length-1&&window.dispatchEvent(new CustomEvent("wf.accordions.mounted",{bubbles:!0,cancelable:!0,detail:window.wfaccordion}))}))})()}();
